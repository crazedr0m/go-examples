Запускать обработку полученного сообщения в отдельной горутине
Вести учет одновременно работающих таких горутин
В конфиге указать лимит на количество одновременно работающих горутин
В случае достижения лимита, переставать принимать сообщения в обработку
В конфиге указать путь к php файлу с обработчиком сообщений
Использовать системный вызов (пример в system-exec) для запуска php файла
Сделать выгрузку стандартных меток в прометеус
Сделать выгрузку меток в прометеус: количество одновременно работающих горутин, время выполнения задачи,  ...
